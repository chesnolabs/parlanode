<template>
  <card-wrapper :header-config="headerConfig" :og-config="ogConfig">
    <p-tabs>
      <p-tab :label="$t('whole-term')">
        <time-chart :data="timeChartData" tooltip-time-format="%B %y" />
      </p-tab>
      <p-tab :label="$t('last-year')">
        <time-bar-chart :data="timeChartData" />
      </p-tab>
    </p-tabs>
  </card-wrapper>
</template>

<script>
import common from '@/_mixins/common.js';
import { search as searchContext } from '@/_mixins/contextUrls.js';
import { searchTitle } from '@/_mixins/titles.js';
import { searchHeader } from '@/_mixins/altHeaders.js';
import { searchOgImage } from '@/_mixins/ogImages.js';
import PTabs from '@/_components/Tabs.vue';
import PTab from '@/_components/Tab.vue';
import TimeChart from '@/_components/TimeChart.vue';
// import TimeBarChart from '@/_components/TimeBarChart.vue';

export default {
  name: 'CardSearchUsageThroughTime',
  components: {
    PTabs,
    PTab,
    TimeChart,
    // TimeBarChart,
  },
  cardInfo: {
    doubleWidth: true,
  },
  mixins: [common, searchTitle, searchHeader, searchOgImage, searchContext],
  data() {
    const data = this.cardData.data?.results || [];
    const timeChartData = data.map((o) => ({
      date: new Date(o.timestamp),
      value: o.value,
    }));
    return {
      timeChartData,
    };
  },
};
</script>

<style lang="scss" scoped>
:deep(.p-tabs) {
  height: 100%;

  .p-tabs-content {
    display: flex;
    align-items: center;

    .tab-content {
      flex-basis: 100%;
    }
  }
}
</style>
